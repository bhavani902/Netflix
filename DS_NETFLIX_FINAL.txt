#include<stdio.h>
#include<string.h>
#include<stdlib.h>
#define MAX 20
char english[20][20] = { "IT", "THE_NUN", "ANNABELLE", "EVIL_DEAD", "THE_UNINVITED",
                           "BOOKSMART", "ZOOTOPIA", "TOY_STORY_4", "LA_LA_LAND", "UP",
                            "PARASITE", "ARRIVAL", "US", "ALIEN", "PSYCHO",
                             "TITANIC", "HER", "THE_ARTIST", "SIDEWAYS", "UP_IN_THE_AIR"
                         };

char telugu[20][20] = { "JESSIE", "KANCHANA", "RAJU_GARI_GADHI", "ARUNDHATHI", "TRIPURA",
                          "KICK", "F2", "BHEESHMA", "ASHTA_CHEMMA", "RACE_GURRAM",
                          "GOODACHARI", "HIT", "SEVEN", "118", "RAKSHASUDU",
                          "GEETHA_GOVINDAM", "NINNU_KORI", "ISHQ", "HELLO", "BOMMARILLU"
                        };
typedef struct node
{
    char data[20];
    struct node *next;
}node;
node *first=NULL, *temp,*t;
void play();
void search()
{
    int o;
    printf("\n\n                                       SEARCH  BOX\n\n");
    while(1)
    {
        char s[20];
        t=(node *)malloc(sizeof(node));
        printf("\n\n---------------------------------------------------------------------");
        printf("\n\nsearch movie by it's name\n");
        printf("\nuse  _ (UNDERSCORE)  instead of  SPACE\n\n");
        scanf("%s",t->data);
        strcpy(s,t->data);
        t->next=NULL;
        int i,f=0;
        for(int i=0;i<20;i++)
        {
            char m[20];
            strcpy(m,english[i]);
            if((strcmpi(s,m))==0)
            {
                f=1;
                break;
            }
        }
        for(i=0;i<20;i++)
        {
            char m[20];
            strcpy(m,telugu[i]);
            if((strcmpi(s,m))==0)
            {
                f=1;
                break;
            }
        }
        if(f==0)
        {
            printf("\n\nSORRY this movie is currently not available\n\n");
            free(t);
        }
        else
        {
            int d;
            mv:
               printf("\n                       %s MOVIE  IS AVAILABLE\n",s);
            printf("\nclick  1  to play       ...  or  ...       2  to download       ");
            fflush(stdin);
            scanf("%d",&d);
            switch(d)
            {
                case 1 : printf("\n\nplaying    %s    movie",s);
                           printf("\n\n\nMOVIE  ENDED\n");
                           break;
                case 2 : { printf("\n\n%s movie is downloading\n",t->data);
                           if(first==NULL)
                             first=t;
                           else
                           {
                              t->next= first;
                              first=t;
                           }
                            printf("\n---------------------------------------------------------------------");
                           printf("\n\n%s movie is successfully downloaded\n\n",t->data);
                           }
                           break;
                default :  printf("\n\nINVALID  ENTRY\n");
                           goto mv;
            }
        }
        printf("CLICK 1 TO EXIT SEARCH BOX OR  ANY OTHER NUMBER TO CONTINUE SEARCHING     ");
        scanf("%d",&o);
        if(o==1)
            break;
    }
}
void display()
    {
        int k;
    if(first==NULL)
    printf("\nno movies are downloaded\n");
    else
    {
    printf("\ndownloaded movies are\n\n");
    temp=first;
    while(temp!=NULL)
    {
    printf("\n        %s\n",temp->data);
    temp=temp->next;
    }
    }
}
void play()
{
int c=0;
char movie[20];
if(first==NULL)
{
    printf("\n You haven't downloaded any videos yet\n");
    printf("\nsearch for the movie in the search box and try plying it\n");
    return;
}
printf("\n\nenter movie name\n");
scanf("%s",movie);
c=0;
temp=first;
while(temp->next!=NULL)
{
if(strcmp(temp->data,movie)==0)
{
c=1;
break;
}
else
temp=temp->next;
}
if(c!=1)
{
    printf("\nthis movie is not downloaded\n");
    printf("\nsearch the movie in the search box and try playing\n");
}
else
{
     printf("\n\nplaying    %s    movie\n",movie);
     printf("\n\nMOVIE  ENDED\n");
}
return;
}
void view()
{
    int i;
    printf("\navailable movies are\n\n");
    for(i=1;i<=20;i++)
    {
        printf("\t%s\t",english[i-1]);
        if((i%5)==0)
            printf("\n\n");

    }
    printf("\n\n\n");
    for(i=1;i<=20;i++)
    {
        printf("\t%s\t",telugu[i-1]);
        if((i%5)==0)
            printf("\n\n");
    }
}
void suggest()
{
    int i,l,g,a;
    all:
    printf("\n\nselect language\n1-ENGLISH\n2-TELUGU                ");
    scanf("%d",&l);
    if((l!=1)&&(l!=2))
    {
        printf("\nINVALID OPYION\n");
        goto all;
    }
    genre:
    printf("\n\nselect a genre\n1-HORROR\n2-COMEDY\n3-THRILLER\n4-ROMANCE                ");
    scanf("%d",&g);
    if((g!=1)&&(g!=2)&&(g!=3)&&(g!=4))
    {
        printf("\nINVALID OPTION\n");
        goto genre;
    }
    a= g*5;
    printf("\nsome of the famous movies are\n\n");
    if(l==1)
    {
        for(i=(a-1);i>=(a-5);i--)
            printf("\n%s\n",english[i]);
    }
    else
    {
        for(i=(a-1);i>=(a-5);i--)
            printf("\n%s\n",telugu[i]);
    }
}
void dele()
{
    if(first==NULL)
     {
        printf("\n NO DOWNLOADED VIDEOS\n");
        return;
     }
    display();
    char mv[20];
    int n;
    printf("enter your choice");
    printf("\n1:delete first video\n 2:delete last video\n 3:delete desired video\n");
	scanf("%d",&n);
	switch(n)
	{
	    case 1: t=first;
	            first=first->next;
	            break;
        case 2: temp=first;
                while((temp->next->next)!=NULL)
                    temp=temp->next;
                t=temp->next;
                temp->next=NULL;
                break;
        case 3: printf("\nenter movie name\n\n");
                scanf("%s",mv);
                temp=first;
                while((temp->next)!=NULL)
                {
                    if(strcmp(temp->next->data,mv)==0)
                        break;
                    temp=temp->next;
                }
                t=temp->next;
                temp->next=temp->next->next;
                break;
        default : printf("\nINVALID OPTION..... DELETION UNSECCESFUL");
	}
	printf("\n%s is deleted from downloads\n",t->data);
	free(t);
}
void main()
{
    int a;
    printf("\n                                                          NETFLIX\n");
    do
    {
    printf("\n\n---------------------------------------------------------------------\n");
    printf("chose\n\n1:SEARCH BOX\n2:VIEW DOWNLOADS\n3:DELETE DOWNLOADED VIDEOS\n4:PLAY MOVIE\n5:VIEW ALL AVAILABLE MOVIES\n6:SUGGESTION BOX\n7:exit             ");
    scanf("%d",&a);
    switch(a)
    {
        case 1: search();
                 break;
        case 2: display();
                 break;
        case 3: dele();
                break;
        case 4: play();
                break;
        case 5: view();
                 break;
        case 6: suggest();
                break;
        case 7: break;
        default : printf("\nINVALID OPTION\n");
    }
    }while(a!=7);
}
